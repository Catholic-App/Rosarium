<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Liturgia Diária - Rosarium</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <button class="btn-back" onclick="goBack()">← Voltar</button>
      <div class="header-title">
        <div class="header-logo">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
        </div>
        <span>Liturgia Diária</span>
      </div>
    </div>
  </header>

  <!-- Conteúdo -->
  <div class="page-container">
    <div class="page-content container-md">
      <h1 class="page-title">Liturgia Diária</h1>

      <!-- Header de Navegação de Data -->
      <div class="liturgia-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <button id="prev-day" class="btn btn-outline">← Anterior</button>
          <h2 id="date-display" class="page-title" style="margin: 0; font-size: 1.2rem;"></h2>
          <button id="next-day" class="btn btn-outline">Próximo →</button>
      </div>

      <!-- Conteúdo da Liturgia -->
      <div id="liturgia-container" class="card">
        <!-- Gerado por JavaScript -->
      </div>

      <!-- Botão Lectio Divina -->
      <div id="lectio-button-container" style="text-align: center; margin-top: 2rem;">
        <button class="btn btn-secondary" onclick="startLectio()">Iniciar Lectio Divina</button>
      </div>

      <!-- Lectio Divina (oculto inicialmente) -->
      <div id="lectio-container" class="hidden">
        <h2 class="page-title" style="margin-top: 2rem;">Lectio Divina</h2>
        
        <!-- Abas de Etapas -->
        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
          <button class="btn" onclick="selectLectioStep(1)" id="step-1-btn">1. Leitura</button>
          <button class="btn btn-outline" onclick="selectLectioStep(2)" id="step-2-btn">2. Meditação</button>
          <button class="btn btn-outline" onclick="selectLectioStep(3)" id="step-3-btn">3. Oração</button>
          <button class="btn btn-outline" onclick="selectLectioStep(4)" id="step-4-btn">4. Contemplação</button>
        </div>

        <!-- Conteúdo das Etapas -->
        <div class="card">
          <h3 class="card-title" id="step-title">1. Leitura</h3>
          <div class="card-content" id="step-content">
            <p>Leia atentamente a passagem bíblica da Liturgia Diária.</p>
          </div>
          
          <div class="form-group">
            <label class="label">Suas anotações:</label>
            <textarea class="input" id="step-notes" placeholder="Escreva suas reflexões..."></textarea>
          </div>
          
          <div style="display: flex; gap: 1rem;">
            <button class="btn" onclick="saveLectioStep()">Salvar</button>
            <button class="btn btn-outline" onclick="closeLectio()">Fechar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
  <script src="liturgia_diaria.js"></script>
  <script>
	    // Lógica de Lectio Divina (mantida)
	    let currentLectioStep = 1;
	    
	    function startLectio() {
	      document.getElementById('liturgia-container').style.display = 'none';
	      document.getElementById('lectio-button-container').style.display = 'none';
	      document.getElementById('lectio-container').classList.remove('hidden');
	      selectLectioStep(1);
	    }
	
	    function selectLectioStep(step) {
	      currentLectioStep = step;
	      
	      // Atualizar botões
	      for (let i = 1; i <= 4; i++) {
	        const btn = document.getElementById(`step-${i}-btn`);
	        if (i === step) {
	          btn.classList.remove('btn-outline');
	        } else {
	          btn.classList.add('btn-outline');
	        }
	      }
	      
let evangelhoTexto = localStorage.getItem('lectio_evangelho_texto');
let evangelhoReferencia = localStorage.getItem('lectio_evangelho_referencia');

// Se não houver dados, define os padrões
if (!evangelhoTexto) {
  evangelhoTexto = 'Texto do Evangelho não disponível.';
  evangelhoReferencia = 'Referência não disponível.';
}
	      
	      // Atualizar conteúdo
	      const titles = [
	        '1. Leitura',
	        '2. Meditação',
	        '3. Oração',
	        '4. Contemplação'
	      ];
	      
	      let content = '';
	      
if (step === 1) {
		          // A lógica de liturgia_diaria.js garante que o texto e a referência são strings vazias se não houver evangelho.
		          // A lógica de liturgia.html (linhas 106-111) define os textos padrão se forem vazios.
		          content = `
			            <h3 style="margin-bottom: 0.5rem; font-weight: 600;">${evangelhoReferencia}</h3>
			            <p>${evangelhoTexto}</p>
			            <p style="margin-top: 1rem;">Leia atentamente a passagem bíblica da Liturgia Diária. Deixe a Palavra de Deus falar ao seu coração.</p>
		          `;
		      } else if (step === 2) {
	          content = `<p>Medite sobre o que você leu. O que Deus quer dizer para você através dessa passagem?</p>`;
	      } else if (step === 3) {
	          content = `<p>Ore respondendo ao que Deus lhe disse. Converse com Deus sobre seus sentimentos e compreensão.</p>`;
	      } else if (step === 4) {
	          content = `<p>Contemple a presença de Deus. Descanse em silêncio na presença do Senhor.</p>`;
	      }
	      
	      document.getElementById('step-title').textContent = titles[step - 1];
	      document.getElementById('step-content').innerHTML = content;
	      
	      // Carregar notas salvas
	      const saved = Storage.get(`lectio_step_${step}`, '');
	      document.getElementById('step-notes').value = saved;
	    }
	
	    function saveLectioStep() {
	      const notes = document.getElementById('step-notes').value;
	      Storage.set(`lectio_step_${currentLectioStep}`, notes);
	      alert('Anotações salvas com sucesso!');
	    }
	
	    function closeLectio() {
	      document.getElementById('lectio-container').classList.add('hidden');
	      document.getElementById('liturgia-container').style.display = 'block';
	      document.getElementById('lectio-button-container').style.display = 'block';
	    }
	  </script>
</body>
</html>
